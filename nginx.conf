server {
    # Nginx listens on port 80 inside the Docker container
    listen 80;
    
    # We remove 'server_name localhost;' as it's not strictly needed 
    # for a container deployment and can sometimes cause issues.

    location / {
        # Root is where the files from the 'build' folder were copied
        root   /usr/share/nginx/html;
        index  index.html index.htm;
        
        # CRITICAL SPA ROUTING LINE
        # 1. Try to serve the requested file ($uri)
        # 2. If it's a directory, look for index.html in that directory ($uri/)
        # 3. If neither is found, serve the main index.html (with a 200 status)
        try_files $uri $uri/ /index.html;
    }

    # IMPORTANT: The API proxy block has been removed. 
    # The React app will now use the URL from .env.staging (the Azure API URL) 
    # to communicate directly with the backend.
}